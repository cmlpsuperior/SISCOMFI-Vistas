CREATE TABLE Planillon (
       idPlanillon          char(8) NOT NULL,
       TiempoProcesado      float NOT NULL,
       idPartidoPolitico    char(8) NOT NULL,
       idProceso            char(8) NOT NULL
)

ALTER TABLE Planillon
       ADD CONSTRAINT XPKPlanillon PRIMARY KEY NONCLUSTERED (
              idPlanillon)

CREATE TABLE Usuario (
       idUsuario            char(8) NOT NULL,
       Nombre               varchar(50) NOT NULL,
       ApellidoPaterno      varchar(100) NOT NULL,
       ApellidoMaterno      varchar(100) NOT NULL,
       CorreoElectronico    varchar(100) NOT NULL,
       Contrasenia          char(8) NOT NULL,
       fechaRegistro        datetime NOT NULL,
       DNI                  char(8) NOT NULL,
       idRol                char(8) NOT NULL
)



ALTER TABLE Usuario
       ADD CONSTRAINT XPKUsuario PRIMARY KEY NONCLUSTERED (idUsuario)


CREATE TABLE RolUsuario (
       idRol                char(8) NOT NULL,
       Nombre               varchar(50) NOT NULL,
       Vista                varchar(100) NOT NULL
)


ALTER TABLE RolUsuario
       ADD CONSTRAINT XPKRolUsuario PRIMARY KEY NONCLUSTERED (idRol)



CREATE TABLE Adherente (
       idAdherente          char(8) NOT NULL,
       Nombre               varchar(50) NOT NULL,
       ApellidoPaterno      varchar(100) NOT NULL,
       ApellidoMaterno      varchar(100) NOT NULL,
       DNI                  char(8) NOT NULL,
       FechaNacimiento      datetime NOT NULL,
       idProvincia          char(8) NOT NULL
)



ALTER TABLE Adherente
       ADD CONSTRAINT XPKAdherente PRIMARY KEY NONCLUSTERED (
              idAdherente)


CREATE TABLE PartidoPolitico (
       idPartidoPolitico    char(8) NOT NULL,
       Nombre               varchar(50) NOT NULL,
       Representante        varchar(100) NOT NULL,
       CorreoRepresentante  varchar(100) NOT NULL,
       Direccion            varchar(100) NOT NULL,
       Telefono             char(10) NOT NULL,
       idProvincia          char(8) NOT NULL
)



ALTER TABLE PartidoPolitico
       ADD CONSTRAINT XPKPartidoPolitico PRIMARY KEY NONCLUSTERED (
              idPartidoPolitico)





CREATE TABLE Provincia (
       idProvincia          char(8) NOT NULL,
       Descripcion          varchar(100) NOT NULL,
       idDepartamento       char(8) NOT NULL
)



ALTER TABLE Provincia
       ADD CONSTRAINT XPKProvincia PRIMARY KEY NONCLUSTERED (
              idProvincia)




CREATE TABLE Departamento (
       idDepartamento       char(8) NOT NULL,
       Descripcion          varchar(100) NOT NULL
)



ALTER TABLE Departamento
       ADD CONSTRAINT XPKDepartamento PRIMARY KEY NONCLUSTERED (
              idDepartamento)



CREATE TABLE Proceso (
       idProceso            char(8) NOT NULL,
       Descripcion          varchar(200) NOT NULL,
       FechaProceso1Inicio  datetime NOT NULL,
       FechaProceso1Fin     datetime NOT NULL,
       FechaProceso2Inicio  datetime NOT NULL,
       FechaProceso2Fin     datetime NOT NULL,
       CantidadMinAdherentes int NOT NULL,
       idTipoProceso        char(8) NOT NULL
)



ALTER TABLE Proceso
       ADD CONSTRAINT XPKProceso PRIMARY KEY NONCLUSTERED (idProceso)




CREATE TABLE TipoProceso (
       idTipoProceso        char(8) NOT NULL,
       Nombre               varchar(50) NOT NULL
)


ALTER TABLE TipoProceso
       ADD CONSTRAINT XPKTipoProceso PRIMARY KEY NONCLUSTERED (
              idTipoProceso)





CREATE TABLE RegistroElector (
       idElector            char(8) NOT NULL,
       Nombre               varchar(50) NOT NULL,
       ApellidoPaterno      varchar(100) NOT NULL,
       ApellidoMaterno      varchar(100) NOT NULL,
       DNI                  char(8) NOT NULL,
       FechaNacimiento      datetime NOT NULL,
       Huella               varchar(100) NOT NULL,
       Firma                varchar(100) NOT NULL
)



ALTER TABLE RegistroElector
       ADD CONSTRAINT XPKRegistroElector PRIMARY KEY NONCLUSTERED (
              idElector)




CREATE TABLE AdherentexPlanillon (
       EstadoValidez        char(1) NOT NULL,
       TiempoProcesado      float NOT NULL,
       PorcentajeHuella     float NOT NULL,
       PorcentajeFirma      float NOT NULL,
       Huella               varchar(100) NOT NULL,
       Firma                varchar(100) NOT NULL,
       idPlanillon          char(8) NOT NULL,
       idAdherente          char(8) NOT NULL
)


ALTER TABLE AdherentexPlanillon
       ADD CONSTRAINT XPKAdherentexPlanillon PRIMARY KEY NONCLUSTERED (
              idPlanillon, idAdherente)




CREATE TABLE PartidoPoliticoxProceso (
       TiempoProcesado      float NOT NULL,
       EstadoPartido        char(1) NOT NULL,
       idPartidoPolitico    char(8) NOT NULL,
       idProceso            char(8) NOT NULL,
       idUsuario            char(8) NOT NULL
)


ALTER TABLE PartidoPoliticoxProceso
       ADD CONSTRAINT XPKPartidoPoliticoxProceso PRIMARY KEY NONCLUSTERED (
              idPartidoPolitico, idProceso)



ALTER TABLE Adherente
       ADD FOREIGN KEY (idProvincia)
                             REFERENCES Provincia (idProvincia)
 


ALTER TABLE AdherentexPlanillon
       ADD FOREIGN KEY (idAdherente)
                             REFERENCES Adherente (idAdherente)
 


ALTER TABLE AdherentexPlanillon
       ADD FOREIGN KEY (idPlanillon)
                             REFERENCES Planillon (idPlanillon)
 


ALTER TABLE PartidoPolitico
       ADD FOREIGN KEY (idProvincia)
                             REFERENCES Provincia (idProvincia)
 


ALTER TABLE PartidoPoliticoxProceso
       ADD FOREIGN KEY (idUsuario)
                             REFERENCES Usuario (idUsuario)
 


ALTER TABLE PartidoPoliticoxProceso
       ADD FOREIGN KEY (idProceso)
                             REFERENCES Proceso (idProceso)
 


ALTER TABLE PartidoPoliticoxProceso
       ADD FOREIGN KEY (idPartidoPolitico)
                             REFERENCES PartidoPolitico (idPartidoPolitico)
 


ALTER TABLE Planillon
       ADD FOREIGN KEY (idPartidoPolitico, idProceso)
                             REFERENCES PartidoPoliticoxProceso (idPartidoPolitico, idProceso)
 


ALTER TABLE Proceso
       ADD FOREIGN KEY (idTipoProceso)
                             REFERENCES TipoProceso (idTipoProceso)
 


ALTER TABLE Provincia
       ADD FOREIGN KEY (idDepartamento)
                             REFERENCES Departamento (idDepartamento)
 


ALTER TABLE Usuario
       ADD FOREIGN KEY (idRol)
                             REFERENCES RolUsuario (idRol)
 